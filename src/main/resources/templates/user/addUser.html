<!DOCTYPE html>
<script src='https://code.jquery.com/jquery-3.3.1.min.js'></script>
<html lang="en">
<head>
    <title>signUp</title>
    <meta charset="UTF-8">
    <script type="text/javascript">
        function idCheck() {

            var memberId = $("#memberId").val();

            if(memberId.search(/\s/) != -1) {
                alert("아이디에는 공백이 들어갈 수 없습니다.");
            } else {
                if(memberId.trim().length != 0) {
                    $.ajax({
                        async : true,
                        type : 'POST',
                        data: memberId,
                        url: "/idCheck",
                        dataType: "json",
                        contentType: "application/json; charset=UTF-8",
                        success: function(count) {
                            if(count > 0) {
                                alert("해당 아이디 존재");
                                $("#submit").attr("disabled", "disabled");
                                window.location.reload();
                            } else {
                                alert("사용가능 아이디");
                                $("#submit").removeAttr("disabled");
                            }
                        },
                        error: function(error) {
                            alert("아이디를 입력해주세요.");
                        }
                    });
                } else {
                    alert("아이디를 입력해주세요.");
                }
            }
        }
    </script>

    <style>
        body {
            background-image: url("https://cdn.pixabay.com/photo/2020/12/10/08/44/mountains-5819652_960_720.jpg");
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-size: cover;
        }
    </style>

</head>
<body>
<h3>signUp</h3>

<form action="signUp" method="post">

    id       : <input type="text" name="userId" placeholder="아이디를 입력해주세요" required>
    <button type="button" onclick="idCheck()">아이디 중복확인</button> </br>
    name     : <input type="text" name="userName" placeholder="이름을 입력해주세요" required> </br>
    password : <input type="password" name="password" placeholder="비밀번호를 입력해주세요" required> </br>
    nickname : <input type="text" name="nickname" placeholder="닉네임을 입력해주세요"> </br>
    email    : <input type="email" name="email" placeholder="이메일을 입력해주세요" required> </br>

</form>

<input type="submit" value="회원가입">
</body>
</html>